<nav
  class="md:bg-white md:shadow-md flex px-6 md:py-4 py-2 justify-between items-center"
>
  <!-- Desktop Menu -->
  <div class="hidden md:flex w-full justify-between items-center">
    <!-- Logo -->
    <div class="text-2xl font-bold text-yellow-600">
      <a
        (click)="closeMenu()"
        [routerLink]="['/']"
        class="inline-block hover:scale-105 hover:opacity-90 transition duration-300 ease-in-out"
      >
        <img
          src="img/Noctura Logo.svg"
          alt="Logo Noctura"
          class="w-24 h-auto p-2"
        />
      </a>
    </div>

    <!-- Navigation Links -->
    <ul class="flex space-x-6 text-gray-700 font-medium">
      <li>
        <a [routerLink]="['/']" class="hover:text-yellow-600 transition"
          >Inicio</a
        >
      </li>
      @for (item of categories; track $index) {
      <li>
        <a
          [routerLink]="['products/', item.nombre]"
          class="hover:text-yellow-600 transition"
        >
          {{ item.nombre }}
        </a>
      </li>
      }
    </ul>

    <!-- Search Bar -->
    <div class="flex items-center space-x-2">
      <input
        type="text"
        placeholder="Buscar..."
        [(ngModel)]="buscarInput"
        class="border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-yellow-500"
      />
      <button
        type="button"
        (click)="buscar()"
        class="bg-yellow-500 text-white px-4 py-1 rounded-md hover:bg-yellow-600 transition cursor-pointer"
      >
        Buscar
      </button>
    </div>
  </div>

  <div>
    <!-- BotÃ³n del menÃº mÃ³vil -->
    <button
      id="menu-btn"
      class="fixed top-4 left-4 z-50 md:hidden bg-white p-2 rounded-md shadow-md"
    >
      <svg
        class="w-6 h-6 text-gray-700"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"
        />
      </svg>
    </button>

    <!--  BUSCADOR MOBILE -->
    <!-- BotÃ³n de bÃºsqueda -->
    <!-- ðŸ” Lupa fija arriba a la derecha -->
    <!-- ðŸ” Lupa fija arriba a la derecha -->
    @if(mostrarLupa == false){
    <div class="fixed top-4 right-4 z-50 md:hidden">
      <button
        type="button"
        (click)="mostrarModal = true"
        class="bg-yellow-500 text-white p-2 rounded-full hover:bg-yellow-600 transition"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z"
          />
        </svg>
      </button>
    </div>

    <!-- ðŸ§Š Overlay transparente + modal -->
    <div
      *ngIf="mostrarModal"
      class="fixed inset-0 z-40 flex items-center justify-center backdrop-blur-md bg-white/10"
      (click)="mostrarModal = false"
    >
      <!-- Evita que el clic dentro del modal lo cierre -->
      <div
        class="bg-white rounded-lg shadow-xl p-6 w-80 relative m-4"
        (click)="$event.stopPropagation()"
      >
        <!-- âŒ BotÃ³n cerrar -->
        <button
          (click)="mostrarModal = false"
          class="absolute top-2 right-2 text-gray-500 hover:text-red-500 text-xl font-bold"
        >
          âœ•
        </button>

        <!-- ðŸ” Campo de bÃºsqueda -->
        <h2 class="text-lg font-semibold text-gray-800 mb-4">
          Â¿QuÃ© estÃ¡s buscando?
        </h2>
        <input
          type="text"
          [(ngModel)]="buscarInput"
          placeholder="EscribÃ­ tu bÃºsqueda..."
          class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500"
        />
        <button
          (click)="buscar(); mostrarModal = false"
          class="mt-4 w-full bg-yellow-500 text-white py-2 rounded-md hover:bg-yellow-600 transition"
        >
          Buscar
        </button>
      </div>
    </div>
    }

    <!-- FIN BUSCADOR MOBILE -->

    <!-- Overlay -->
    <div
      id="overlay"
      class="fixed inset-0 bg-gray-400 bg-opacity-80 z-40 hidden md:hidden"
    ></div>

    <!-- MenÃº mÃ³vil -->
    <div
      id="menu"
      class="fixed top-0 left-0 h-full w-64 bg-white shadow-xl z-50 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden border-r border-gray-200"
    >
      <div class="flex flex-col h-full">
        <!-- Encabezado -->
        <div
          class="flex items-center justify-between px-6 py-4 border-b border-gray-200"
        >
          <a
            (click)="closeMenu()"
            [routerLink]="['/']"
            class="text-xl font-bold text-yellow-600 inline-block"
          >
            <img
              src="img/Noctura Logo.svg"
              alt="Logo Noctura"
              class="w-24 h-auto"
            />
          </a>

          <button
            (click)="closeMenu()"
            class="text-gray-500 hover:text-yellow-600 transition"
          >
            âœ•
          </button>
        </div>

        <!-- Enlaces -->
        <ul class="flex flex-col px-6 py-4 space-y-3 text-gray-700 font-medium">
          <li (click)="closeMenu()">
            <a [routerLink]="['/']" class="hover:text-yellow-600 transition"
              >Inicio</a
            >
          </li>
          @for (item of categories; track $index) {
          <li (click)="closeMenu()">
            <a
              [routerLink]="['products/', item.nombre]"
              class="hover:text-yellow-600 transition"
            >
              {{ item.nombre }}
            </a>
          </li>
          }
        </ul>
      </div>
    </div>
  </div>
</nav>
